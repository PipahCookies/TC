<!doctype html>
<html lang="ms">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pipah Cookies — Homemade rasa Premium</title>
  
    <!-- 🌟 Facebook / WhatsApp / Telegram Preview -->
  <meta property="og:title" content="Pipah Cookies - Homemade rasa Premium" />
  <meta property="og:description" content="Jemput cuci mata dan terus pesan/tempah sekarang 🍪" />
  <meta property="og:image" content="images/Header2.jpg" />
  <meta property="og:url" content="https://pipahcookies.github.io/TC/" />
  <meta property="og:type" content="Online Bakery" />
  <meta property="og:site_name" content="Pipah Cookies" />

  <!-- 🌟 Untuk Twitter / WhatsApp Preview -->
  <meta name="twitter:card" content="summary_large_image" />

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700&family=Fredoka&display=swap" rel="stylesheet">

  <style>
  :root{
    --primary:#ff9f68;
    --primary-dark:#e68550;
    --accent:#fff1e6;
    --whatsapp:#25d366;
    --bg:#fff8f2;
    --card:#ffffff;
    --muted:#6b6b6b;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:"Fredoka",sans-serif;background:var(--bg);color:#222;-webkit-font-smoothing:antialiased}
  h1,h2,h3{font-family:"Poppins",sans-serif;color:var(--primary-dark);margin:0 0 8px}
  a{color:inherit}

/* Header */
  .site-header{display:block}
  .header-img{width:100%;height:auto;display:block;object-fit:cover;max-height:360px;border-radius:0 0 14px 14px;box-shadow:0 8px 18px rgba(0,0,0,0.06);animation:fadeUp .9s both}
/* Nav */
  .site-nav{position:sticky;top:0;background:var(--primary);z-index:40;padding:10px 0}
  .nav-list{list-style:none;margin:0;padding:0;display:flex;gap:12px;justify-content:center;align-items:center;flex-wrap:wrap}
  .nav-list a{color:#fff;text-decoration:none;font-weight:700;padding:8px 12px;border-radius:8px;transition:transform .15s}
  .nav-list a:hover{transform:translateY(-3px);background:rgba(255,255,255,0.08)}

/* Carousel */
  .offers-section{padding:18px;background:linear-gradient(180deg,var(--accent),transparent)}
  .carousel{max-width:1100px;margin:0 auto;position:relative;overflow:hidden;border-radius:12px}
  .slides{display:flex;transition:transform .6s ease}
  .slide{min-width:100%;height:240px;object-fit:cover;display:block}
  .dots{position:absolute;left:50%;transform:translateX(-50%);bottom:10px;display:flex;gap:8px}
  .dots button{width:9px;height:9px;border-radius:50%;border:none;background:rgba(255,255,255,0.6);cursor:pointer}
  .dots button.active{background:#fff}

/* Sections */
  .section{padding:36px 18px}
  .lead{max-width:900px;margin:0 auto;color:var(--muted);line-height:1.5}

/* Product grid */
  .product-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:18px;max-width:1100px;margin:12px auto}
  .card{background:var(--card);border-radius:12px;padding:12px;box-shadow:0 12px 24px rgba(0,0,0,0.06);transition:transform .18s}
  .card:hover{transform:translateY(-8px)}
  .product-img{width:100%;height:160px;object-fit:cover;border-radius:8px}
  .old-price{text-decoration:line-through;color:gray;font-size:14px;}
  .price{color:var(--primary-dark);font-weight:700;margin-bottom:6px}

/* qty & buttons */
  .qty-control{display:flex;justify-content:center;align-items:center;gap:8px;margin:10px 0}
  .qty-btn{background:var(--primary);color:#fff;border:none;padding:6px 12px;border-radius:8px;font-size:18px;cursor:pointer;transition:transform .12s}
  .qty-btn:hover{background:var(--primary-dark);transform:scale(1.04)}
  .qty-input{min-width:48px;text-align:center;border-radius:8px;border:1px solid #eee;padding:6px;background:#fff}
  .btn{display:inline-block;padding:10px 14px;border-radius:22px;border:none;cursor:pointer;font-weight:800;transition:transform .14s,box-shadow .14s}
  .btn.primary{background:var(--primary);color:#fff}
  .btn.primary:hover{background:var(--primary-dark);transform:translateY(-3px)}
  .btn.secondary{background:#fff;color:var(--primary);border:2px solid var(--primary)}
  .btn.checkout{background:var(--whatsapp);color:#fff}
  .btn.checkout:hover{background:#1ebe57;transform:scale(1.03)}

/* testimonials gallery faq */
  .testimonials{max-width:1000px;margin:0 auto;display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px}
  blockquote{background:var(--accent);padding:14px;border-radius:10px;margin:0;font-style:italic;color:#403b3b}
  .gallery-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:12px;max-width:1000px;margin:0 auto}
  .gallery-grid img{width:100%;height:140px;object-fit:cover;border-radius:10px;display:block}
  .faq{max-width:900px;margin:0 auto;text-align:left}
  .faq .q{background:#fff;padding:12px;border-radius:8px;margin-bottom:10px;box-shadow:0 6px 12px rgba(0,0,0,0.04)}
  .faq .a{margin-top:8px;color:var(--muted)}

/* floating cart icon */
  #cart-icon{position:fixed;right:20px;bottom:20px;width:56px;height:56px;border-radius:50%;background:var(--primary);color:#fff;border:none;display:flex;align-items:center;justify-content:center;font-size:20px;cursor:pointer;z-index:120;box-shadow:0 14px 30px rgba(0,0,0,0.16);transition:transform .18s}
  #cart-icon:hover{transform:scale(1.06)}
  #cart-badge{position:absolute;top:6px;right:6px;background:#ff3b3b;color:#fff;padding:3px 7px;border-radius:50%;font-weight:800;font-size:12px;box-shadow:0 6px 12px rgba(0,0,0,0.12)}

/* cart panel sliding */
  .cart-panel{position:fixed;right:20px;bottom:92px;width:340px;max-height:72vh;overflow:auto;background:#fff;padding:12px;border-radius:12px;box-shadow:0 30px 60px rgba(0,0,0,0.18);z-index:120;transform:translateY(10px);opacity:0;pointer-events:none}
  .cart-panel.show{transform:translateY(0);opacity:1;pointer-events:auto;animation:slideUp .26s both}
  .cart-header{display:flex;justify-content:space-between;align-items:center}
  .close-cart{background:transparent;border:none;font-size:18px;cursor:pointer}
  .cart-items{list-style:none;padding:0;margin:10px 0;display:flex;flex-direction:column;gap:8px}
  .cart-items li{display:flex;justify-content:space-between;align-items:center;padding:8px;border-radius:8px;background:#fff9f5;border:1px solid #fee6d8}
  .cart-items li button{margin-left:6px;padding:6px 8px;border-radius:6px;border:none;cursor:pointer}

/* checkout form */
  .checkout-form{display:flex;flex-direction:column;gap:8px;margin-top:8px}
  .checkout-form input,.checkout-form textarea{padding:8px;border-radius:8px;border:1px solid #eee;font-family:inherit}

/* misc */
  .cart-summary{margin-top:6px}
  .cart-actions{margin-top:10px;display:flex;gap:8px;justify-content:space-between}
  .hidden{display:none}

/* animations */
  @keyframes fadeUp{from{opacity:0;transform:translateY(14px)}to{opacity:1;transform:translateY(0)}}
  @keyframes slideUp{from{opacity:0;transform:translateY(14px)}to{opacity:1;transform:translateY(0)}}
  @keyframes bounce{0%,100%{transform:scale(1)}50%{transform:scale(1.12)}}
  .added{animation:bounce .46s both}
  @keyframes fadeInUp{from{opacity:0;transform:translateY(18px)}to{opacity:1;transform:translateY(0)}}
  .fade-up{opacity:0;animation:fadeInUp .9s forwards}

/* responsive tweaks */
  @media (max-width:900px){.cart-panel{right:12px;left:12px;width:auto;bottom:90px}.header-img{max-height:280px}}
  @media (max-width:520px){.nav-list{gap:9px;padding:6px}.slide{height:160px}.product-img{height:130px}}
  </style>
</head>
<body>

  <!-- ========== HEADER ========== -->
  <!-- Put your header image at images/header.jpg -->
  <header class="site-header">
    <img src="images/Header2.jpg" alt="Pipah Cookies" class="header-img">
  </header>

  <!-- ========== NAV ========== -->
  <nav class="site-nav">
    <ul class="nav-list">
      <li><a href="#offers">Tawaran</a></li>
      <li><a href="#products">Produk</a></li>
      <li><a href="#about">Tentang</a></li>
      <li><a href="#testimonials">Testimoni</a></li>
      <li><a href="#gallery">Galeri</a></li>
      <li><a href="#faq">FAQ</a></li>
      <li><a href="#contact">Hubungi</a></li>
    </ul>
  </nav>

  <!-- ========== OFFERS CAROUSEL ========== -->
  <section id="offers" class="section offers-section fade-up">
    <div class="carousel" id="carousel">
      <div class="slides">
        <!-- images: images/offer1.jpg ... offer4.jpg -->
        <img src="images/Banner1.png" alt="Tawaran 1" class="slide">
        <img src="images/Banner4.jpg" alt="Tawaran 2" class="slide">
        <img src="images/Banner3.jpg" alt="Tawaran 3" class="slide">
        <img src="images/pic31.jpg" alt="Tawaran 4" class="slide">
      </div>
      <div class="dots" id="carousel-dots"></div>
    </div>
  </section>

  <!-- ========== MAIN ========== -->
  <main>

    <!-- PRODUCTS -->
    <section id="products" class="section fade-up">
      <h2>Produk Kami</h2>
      <div class="product-grid" id="product-grid">
        <!-- card 1 -->
        <article class="card product-card">
          <img src="images/Prod1.jpg" alt="Seasalt Cookies(65pcs)" class="product-img">
          <h3>Seasalt Cookies(65pcs)</h3>
          <p><span class="old-price">RM20</span> <span class="price">RM18</span></p>
          <div class="qty-control">
            <button class="qty-btn" onclick="changeProductQty('p1', -1)">−</button>
            <input id="qty-p1" class="qty-input" type="number" readonly value="0" min="0">
            <button class="qty-btn" onclick="changeProductQty('p1', 1)">+</button>
          </div>
          <button class="btn primary" onclick="addToCart('p1','Seasalt Cookies(65pcs)',18)">Tambah ke Troli</button>
        </article>

        <!-- card 2 -->
        <article class="card product-card">
          <img src="images/Prod2.jpg" alt="ChocHazelnut Button" class="product-img">
          <h3>ChocHazelnut Button(38pcs)</h3>
          <p><span class="old-price">RM29</span> <span class="price">RM22</span></p>
          <div class="qty-control">
            <button class="qty-btn" onclick="changeProductQty('p2', -1)">−</button>
            <input id="qty-p2" class="qty-input" type="number" readonly value="0" min="0">
            <button class="qty-btn" onclick="changeProductQty('p2', 1)">+</button>
          </div>
          <button class="btn primary" onclick="addToCart('p2','ChocHazelnut Button',22)">Tambah ke Troli</button>
        </article>

        <!-- card 3 -->
        <article class="card product-card">
          <img src="images/Prod3.jpg" alt="Brownies Cookies" class="product-img">
          <h3>Brownies Cookies(70pcs)</h3>
          <p><span class="old-price">RM25</span> <span class="price">RM20</span></p>
          <div class="qty-control">
            <button class="qty-btn" onclick="changeProductQty('p3', -1)">−</button>
            <input id="qty-p3" class="qty-input" type="number" readonly value="0" min="0">
            <button class="qty-btn" onclick="changeProductQty('p3', 1)">+</button>
          </div>
          <button class="btn primary" onclick="addToCart('p3','Brownies Cookies',20)">Tambah ke Troli</button>
        </article>
        
        <!-- card 4 -->
        <article class="card product-card">
          <img src="images/Prod4.jpg" alt="DarkChoc Cookies" class="product-img">
          <h3>DarkChoc Cookies(80pcs)</h3>
          <p><span class="old-price">RM25</span> <span class="price">RM20</span></p>
          <div class="qty-control">
            <button class="qty-btn" onclick="changeProductQty('p4', -1)">−</button>
            <input id="qty-p4" class="qty-input" type="number" readonly value="0" min="0">
            <button class="qty-btn" onclick="changeProductQty('p4', 1)">+</button>
          </div>
          <button class="btn primary" onclick="addToCart('p4','DarkChoc Cookies',20)">Tambah ke Troli</button>
        </article>

      </div>
    </section>

    <!-- ABOUT -->
    <section id="about" class="section fade-up">
      <h2>*PERHATIAN*</h2>
      <p class="lead">*• KOS POSTAGE BERMULA RM5 KEATAS BERDASARKAN JUMLAH PESANAN (JIKA MENCUKUPI MOQ MUNGKIN ADA DISKAUN). </p>
      <p class="lead">• SILA CEK PESANAN SEMULA DI TROLI SEBELUM TEKAN PESAN.</p>
    </section>
    
    <section id="about" class="section fade-up">
      <h2>Tentang Kami</h2>
      <p class="lead">Assalamualaikum dan sejahtera 
Hai kami dari Pipah Cookies sudah beroperasi sejak 2020, Kami menjual produk baked fresh, homemade, sedia masak, pre-order, frozen dan juga produk bungkusan (ready to post). </p>

      <p class="lead">Kualiti dan citarasa PREMIUM adalah keutamaan kami, Alhamdulillah Allah bagi rasa sedap dan InshaAllah lebih murah (; .</p>
      
      <p class="lead">Jemput mencuci mata, dan membeli belah, inshaaAllah jauh kami pos, dekat bole greb atau lalamuv boleh juga self-pickup,</p>
      <p class="lead">*Harga belum termasuk postage fee* </p>
    </section>

    <!-- TESTIMONIALS -->
    <section id="testimonials" class="section fade-up">
      <h2>Testimoni Pelanggan</h2>
    <!-- 💕 Elegant Modern Cute Lightbox for Pipah Cookies -->
<style>
  /* Lightbox Overlay (hidden by default) */
  #imgModal {
    display: none;
    position: fixed;
    z-index: 999;
    inset: 0;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(5px);
    justify-content: center;
    align-items: center;
    animation: fadeIn 0.3s ease;
  }

  /* Image inside popup */
  #imgModal img {
    max-width: 90%;
    max-height: 85vh;
    border-radius: 20px;
    box-shadow: 0 0 30px rgba(255, 192, 203, 0.4);
    cursor: zoom-out;
    opacity: 0;
    transform: scale(0.8);
    transition: transform 0.35s ease, opacity 0.35s ease;
  }

  /* Close button */
  #closeBtn {
    position: fixed;
    top: 20px;
    right: 30px;
    font-size: 30px;
    font-weight: bold;
    color: #fff;
    text-shadow: 0 0 10px rgba(255, 182, 193, 0.8);
    cursor: pointer;
    transition: 0.3s;
    z-index: 1000;
    display: none; /* hidden until image opens */
  }

  #closeBtn:hover {
    color: #ffb6c1;
    transform: scale(1.2);
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
</style>

<!-- Popup Container -->
<div id="imgModal">
  <span id="closeBtn">✖</span>
  <img id="modalImg" />
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const modal = document.getElementById("imgModal");
    const modalImg = document.getElementById("modalImg");
    const closeBtn = document.getElementById("closeBtn");

    // ✅ Make all normal images clickable
    document.querySelectorAll("img").forEach(img => {
      img.style.cursor = "zoom-in";
      img.addEventListener("click", () => {
        modal.style.display = "flex";
        closeBtn.style.display = "block";
        modalImg.src = img.src;

        // Smooth center zoom-in animation
        requestAnimationFrame(() => {
<!-- 💕 Elegant Modern Cute Lightbox for Pipah Cookies -->
<style>
  /* Lightbox Overlay (hidden by default) */
  #imgModal {
    display: none;
    position: fixed;
    z-index: 999;
    inset: 0;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(5px);
    justify-content: center;
    align-items: center;
    animation: fadeIn 0.3s ease;
  }

  /* Image inside popup */
  #imgModal img {
    max-width: 90%;
    max-height: 85vh;
    border-radius: 20px;
    box-shadow: 0 0 30px rgba(255, 192, 203, 0.4);
    cursor: zoom-out;
    opacity: 0;
    transform: scale(0.8);
    transition: transform 0.35s ease, opacity 0.35s ease;
  }

  /* Close button */
  #closeBtn {
    position: fixed;
    top: 20px;
    right: 30px;
    font-size: 30px;
    font-weight: bold;
    color: #fff;
    text-shadow: 0 0 10px rgba(255, 182, 193, 0.8);
    cursor: pointer;
    transition: 0.3s;
    z-index: 1000;
    display: none; /* hidden until image opens */
  }

  #closeBtn:hover {
    color: #ffb6c1;
    transform: scale(1.2);

</script>  <div class="testimonials">
        <blockquote>“Biskut paling sedap! Anak-anak saya suka sangat!, sekali serang habis” <cite>– Aina</cite></blockquote>
        <blockquote>“Rangup di luar, lembut di dalam. Terbaik!” <cite>– Daniel</cite></blockquote>
        <blockquote>“Rugi weh aritu aku beli satu je sejenis,serius sedap tak cukup rasa sebalang tu.” <cite>– Linda</cite></blockquote>
      </div>
    </section>

    <!-- GALLERY -->
  
</section>
    <section id="gallery" class="section fade-up">
      <h2>Galeri</h2>
      <div class="gallery-grid">
        <img src="images/pic31.jpg" alt="Galeri 1">
        <img src="images/pic10.jpg" alt="Galeri 2">
        <img src="images/pic29.jpg" alt="Galeri 3">
        <img src="images/pic28.jpg" alt="Galeri 3">
        <img src="images/pic27.jpg" alt="Galeri 3">
        <img src="images/pic26.jpg" alt="Galeri 3">
        <img src="images/pic25.jpg" alt="Galeri 3">
        <img src="images/pic21.jpg" alt="Galeri 3">
        <img src="images/pic11.jpg" alt="Galeri 3">
        <img src="images/pic13.jpg" alt="Galeri 3">
      </div>
    </section>

<!-- 💕 Elegant Modern Cute Lightbox for Pipah Cookies -->
<style>
  /* Lightbox Overlay (hidden by default) */
  #imgModal {
    display: none;
    position: fixed;
    z-index: 999;
    inset: 0;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(5px);
    justify-content: center;
    align-items: center;
    animation: fadeIn 0.3s ease;
  }

  /* Image inside popup */
  #imgModal img {
    max-width: 90%;
    max-height: 85vh;
    border-radius: 20px;
    box-shadow: 0 0 30px rgba(255, 192, 203, 0.4);
    cursor: zoom-out;
    opacity: 0;
    transform: scale(0.8);
    transition: transform 0.35s ease, opacity 0.35s ease;
  }

  /* Close button */
  #closeBtn {
    position: fixed;
    top: 20px;
    right: 30px;
    font-size: 30px;
    font-weight: bold;
    color: #fff;
    text-shadow: 0 0 10px rgba(255, 182, 193, 0.8);
    cursor: pointer;
    transition: 0.3s;
    z-index: 1000;
    display: none; /* hidden until image opens */
  }

  #closeBtn:hover {
    color: #ffb6c1;
    transform: scale(1.2);
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
</style>

<!-- Popup Container -->
<div id="imgModal">
  <span id="closeBtn">✖</span>
  <img id="modalImg" />
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const modal = document.getElementById("imgModal");
    const modalImg = document.getElementById("modalImg");
    const closeBtn = document.getElementById("closeBtn");

    // ✅ Make all normal images clickable
    document.querySelectorAll("img").forEach(img => {
      img.style.cursor = "zoom-in";
      img.addEventListener("click", () => {
        modal.style.display = "flex";
        closeBtn.style.display = "block";
        modalImg.src = img.src;

        // Smooth center zoom-in animation
        requestAnimationFrame(() => {
          modalImg.style.opacity = "1";
          modalImg.style.transform = "scale(1)";
        });
      });
    });

    // ✅ Close on button click
    closeBtn.addEventListener("click", () => closeModal());
    // ✅ Close on background click
    modal.addEventListener("click", e => {
      if (e.target === modal) closeModal();
    });

    function closeModal() {
      modalImg.style.opacity = "0";
      modalImg.style.transform = "scale(0.8)";
      setTimeout(() => {
        modal.style.display = "none";
        closeBtn.style.display = "none";
      }, 300);
    }
  });
</script>
    
    <!-- FAQ -->
    <section id="faq" class="section fade-up">
      <h2>Soalan Lazim</h2>
      <div class="faq">
        <div class="q"><strong>S:</strong> Adakah anda mempunyai khidmat penghantaran?<div class="a">J: Ya — penghantaran di seluruh Malaysia termasuk sabah dan sarawak.</div></div>
        <div class="q"><strong>S:</strong> Bagaimana payment dan postage ?<div class="a">J: Kami menyediakan pembayaran online transfer,QR Duitnow,dan COD- postage bergantung kepada berat bungkusan(Tapi jika mencukupi MOQ mungkin ada diskaun t&c apply.</div></div>
        <div class="q"><strong>S:</strong> Adakah biskut anda halal?<div class="a">J: Ya — bahan yang digunakan adalah Halal 100%.</div></div>
        <div class="q"><strong>S:</strong> Berapa lama ketahanan?<div class="a">J: Disyorkan paling lama 30 hari jika disimpan rapat.</div></div>
      </div>
    </section>

    <!-- CONTACT -->
    <section id="contact" class="section fade-up">
      <h2>Hubungi Kami</h2>
      <p>Untuk pesanan atau pertanyaan, hantarkan mesej melalui WhatsApp atau Follow dan chat di shopee dan insta kami.</p>
      <p><a class="link" href="https://my.shp.ee/1hJ5Dkg">Shopee@pipahcookies</a></p>
       <p><a class="link" href="https://www.instagram.com/hafifahakilah?igsh=em5zbXBkOWQwamp6&utm_source=qr">Insta@pipahcookies</a></p>
      <p><a class="btn secondary" href="#" onclick="window.open('https://wa.me/601121243407','_blank')">Chat di WhatsApp</a></p>
    </section>

    <!-- 🎵 Floating Music Button with Smart Color + Auto Hide -->
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap" rel="stylesheet">

<audio id="bgmusic" loop muted>
  <source src="images/music.mp3" type="audio/mpeg">
</audio>

<div id="musicWrapper" style="position:fixed; bottom:20px; left:20px; z-index:9999; display:flex; align-items:center; transition:opacity 0.8s ease, transform 0.8s ease;">
  <button id="musicBtn" class="music-btn">🍪</button>
  <span id="musicText" class="music-text">Play if u Chilling...</span>
</div>

<style>
.music-btn {
  background-color: rgba(255, 255, 255, 0.25);
  backdrop-filter: blur(0px);
  border: 2px solid rgba(255, 255, 255, 0.5);
  border-radius: 50%;
  width: 55px;
  height: 55px;
  font-size: 24px;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 0 8px rgba(255,255,255,0.3);
  display: flex;
  align-items: center;
  justify-content: center;
  color: #fff;
}

.music-text {
  color: white;
  font-family: 'Dancing Script', cursive;
  font-size: 16px;
  margin-left: 14px;
  opacity: 0;
  transform: translateX(-25px);
  transition: all 0.7s ease;
  position: relative;
  top: -2px;
  text-shadow: 0 2px 6px rgba(0,0,0,0.3);
}

@keyframes glowPulse {
  0% { box-shadow: 0 0 10px rgba(255, 215, 0, 0.5); }
  50% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.9); }
  100% { box-shadow: 0 0 10px rgba(255, 215, 0, 0.5); }
}

@keyframes spinDisk {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.playing {
  animation: glowPulse 2s infinite;
  background-color: rgba(255, 204, 0, 0.4);
  border-color: rgba(255, 204, 0, 0.8);
}

.spinning {
  animation: spinDisk 6s linear infinite;
}
</style>

  </main>

  <!-- FLOATING CART ICON -->
  <button id="cart-icon" aria-label="Troli" onclick="toggleCart()">
    <span class="icon">🛒</span>
    <span id="cart-badge" class="badge">0</span>
  </button>

  <!-- CART PANEL -->
  <aside id="cart-panel" class="cart-panel" aria-live="polite" aria-hidden="true">
    <div class="cart-header">
      <h3>Troli Anda</h3>
      <button class="close-cart" onclick="toggleCart()">✕</button>
    </div>

    <ul id="cart-items" class="cart-items"></ul>

    <div class="cart-summary">
      <p id="cart-total">Jumlah: RM 0.00</p>
    </div>
  <label for="delivery-method">Penerimaan:</label>
<select id="delivery-method" onchange="updateCartUI()">
  <option value="pickup">Pickup</option>
  <option value="cod">COD (Bergantung Area)</option>
  <option value="delivery">Delivery (+RM5)</option>
</select>

<div id="cart-total"></div>

    <!-- Checkout form (Nama & Alamat) -->
    <div id="checkout-form" class="checkout-form hidden">
      <input id="full-name" type="text" placeholder="Nama penuh" />
      <textarea id="full-address" placeholder="Alamat penuh"></textarea>
      <button class="btn checkout" onclick="sendOrder()">Hantar Pesanan (WhatsApp)</button>
    </div>

    <div class="cart-actions">
      <button class="btn primary" id="open-checkout" onclick="showCheckoutForm()">Teruskan ke Checkout</button>
    </div>
  </aside>

  <!-- ========== SCRIPT ========== -->
  <script>
  // Replace with your WhatsApp number (international format, no + or spaces)
  const WHATSAPP_NUMBER = '601121243407'; // <-- change this

  const STORAGE_KEY = 'pipah_cart_v1';
  let cart = []; // array of {id,name,price,qty}
  let carouselIndex = 0;
  let carouselInterval = null;

  // init
  document.addEventListener('DOMContentLoaded', () => {
    // load cart
    const saved = localStorage.getItem(STORAGE_KEY);
    if (saved) {
      try { cart = JSON.parse(saved) || []; } catch(e){ cart = []; }
    }
    // ensure product card qty inputs exist with numeric defaults
    document.querySelectorAll('.qty-input').forEach(inp => {
      if (!inp.value || isNaN(inp.value)) inp.value = 1;
      // min 0 allowed; keep as number string
      inp.value = Math.max(0, parseInt(inp.value));
    });

    updateCartUI();
    document.querySelectorAll('.fade-up').forEach((el,i)=> el.style.animationDelay = (i*80)+'ms');
    initCarousel('carousel', 3000);
  });

  /* ---------- Carousel ---------- */
  function initCarousel(id, intervalMs=3000){
    const root = document.getElementById(id);
    if (!root) return;
    const slidesWrap = root.querySelector('.slides');
    const slides = slidesWrap.querySelectorAll('.slide');
    const dotsWrap = document.getElementById('carousel-dots');
    dotsWrap.innerHTML = '';
    slides.forEach((_,i) => {
      const btn = document.createElement('button');
      btn.addEventListener('click', ()=> showSlide(i, slidesWrap, slides, dotsWrap));
      dotsWrap.appendChild(btn);
    });
    showSlide(0, slidesWrap, slides, dotsWrap);
    carouselInterval = setInterval(()=> {
      carouselIndex = (carouselIndex + 1) % slides.length;
      showSlide(carouselIndex, slidesWrap, slides, dotsWrap);
    }, intervalMs);
    // pause on hover
    root.addEventListener('mouseenter', ()=> clearInterval(carouselInterval));
    root.addEventListener('mouseleave', ()=> carouselInterval = setInterval(()=> {
      carouselIndex = (carouselIndex + 1) % slides.length;
      showSlide(carouselIndex, slidesWrap, slides, dotsWrap);
    }, intervalMs));
  }
  function showSlide(index, slidesWrap, slides, dotsWrap){
    slidesWrap.style.transform = 'translateX(-'+(index*100)+'%)';
    carouselIndex = index;
    Array.from(dotsWrap.children).forEach((d,i)=> d.classList.toggle('active', i===index));
  }

  /* ---------- Product card qty control ---------- */
  function changeProductQty(productId, delta){
    const input = document.getElementById('qty-'+productId);
    if (!input) return;
    let v = Math.max(0, parseInt(input.value || '0') + delta);
    input.value = v;
  }

  /* ---------- Add to cart ---------- */
  function addToCart(id, name, price){
    const qtyInput = document.getElementById('qty-'+id);
    const qty = qtyInput ? Math.max(0, parseInt(qtyInput.value || '0')) : 1;
    if (qty <= 0){
      alert('Sila pilih kuantiti (lebih 0) sebelum tambah ke troli.');
      return;
    }
    const existing = cart.find(i=>i.id===id);
    if (existing) existing.qty += qty;
    else cart.push({id,name,price:Number(price),qty});
    saveCart();
    updateCartUI();
    // bounce icon
    const icon = document.getElementById('cart-icon');
    icon.classList.add('added');
    setTimeout(()=> icon.classList.remove('added'), 480);
  }
 /* ---------- Tier Postage Config ---------- */
// Boleh ubah ikut suka. max = maksimum quantity untuk caj tu.
const postageTiers = [
  { max: 3, fee: 5 },   // 1-3 item = RM5
  { max: 6, fee: 7 },   // 4-6 item = RM8
  { max: 10, fee: 12 }, // 7-10 item = RM12
  { max: Infinity, fee: 15 } // 11 ke atas = RM15
];

/* ---------- Update cart UI ---------- */
function updateCartUI(){
  const list = document.getElementById('cart-items');
  const totalEl = document.getElementById('cart-total');
  const badge = document.getElementById('cart-badge');
  list.innerHTML = '';
  let subtotal = 0, count = 0;
  
  cart.forEach((item,idx)=>{
    subtotal += item.price * item.qty;
    count += item.qty;

    const li = document.createElement('li');
    // left (name & price)
    const left = document.createElement('div'); left.style.flex='1';
    left.innerHTML = `<strong>${escapeHtml(item.name)}</strong><div style="font-size:12px;color:#666">RM ${(item.price * item.qty).toFixed(2)}</div>`;
    // middle (qty controls)
    const middle = document.createElement('div');
    const minus = document.createElement('button'); minus.textContent='−'; minus.onclick = ()=> changeCartQty(idx,-1);
    const qtySpan = document.createElement('span'); qtySpan.textContent=' '+item.qty+' '; qtySpan.style.fontWeight='700';
    const plus = document.createElement('button'); plus.textContent='+'; plus.onclick = ()=> changeCartQty(idx,1);
    middle.appendChild(minus); middle.appendChild(qtySpan); middle.appendChild(plus);
    // right (remove)
    const right = document.createElement('div');
    const rem = document.createElement('button'); rem.textContent='x';
    rem.style.background='#ff4d4d'; rem.style.color='#fff'; rem.style.border='none'; 
    rem.style.padding='6px 8px'; rem.style.borderRadius='6px';
    rem.onclick = ()=> removeCartItem(idx);
    right.appendChild(rem);

    li.appendChild(left);
    li.appendChild(middle);
    li.appendChild(right);
    list.appendChild(li);
  });

  // default postage
  let postage = 0;

  // pilih method penerimaan
  const method = document.getElementById('delivery-method')?.value || "pickup";

  if(method === "pickup"){ 
    postage = 0; 
  }
  else if(method === "cod"){ 
    postage = 0; // boleh extend ikut area
  }
  else if(method === "delivery"){ 
    // cari dalam tier config
    for (let tier of postageTiers){
      if(count <= tier.max){
        postage = tier.fee;
        break;
      }
    }
  }

  const finalTotal = subtotal + postage;

  // Update jumlah dengan pecahan
  totalEl.innerHTML = `
    <div style="font-size:14px;color:#555">Subtotal: RM ${subtotal.toFixed(2)}</div>
    <div style="font-size:14px;color:#555">Postage: RM ${postage.toFixed(2)} (${method.toUpperCase()})</div>
    <strong style="font-size:16px">Jumlah: RM ${finalTotal.toFixed(2)}</strong>
  `;

  badge.textContent = count;

  saveCart();
}

  /* ---------- Change cart qty ---------- */
  function changeCartQty(index, delta){
    if (!cart[index]) return;
    cart[index].qty += delta;
    if (cart[index].qty <= 0){
      // remove and reset corresponding product card qty to 0
      const removed = cart.splice(index,1)[0];
      const productInput = document.getElementById('qty-'+removed.id);
      if (productInput) productInput.value = 0;
    }
    saveCart();
    updateCartUI();
  }

  /* ---------- Remove item ---------- */
  function removeCartItem(index){
    if (!cart[index]) return;
    const removed = cart.splice(index,1)[0];
    // reset product card qty input to 0 if present
    const productInput = document.getElementById('qty-'+removed.id);
    if (productInput) productInput.value = 0;
    saveCart();
    updateCartUI();
  }

  /* ---------- Toggle cart panel (slide) ---------- */
  function toggleCart(){
    const panel = document.getElementById('cart-panel');
    const isShown = panel.classList.contains('show');
    if (isShown) panel.classList.remove('show'); else panel.classList.add('show');
    panel.setAttribute('aria-hidden', isShown ? 'true' : 'false');
  }

  /* ---------- Show checkout form ---------- */
  function showCheckoutForm(){
    document.getElementById('checkout-form').classList.remove('hidden');
    document.getElementById('open-checkout').style.display = 'none';
    const panel = document.getElementById('cart-panel');
    panel.scrollTop = panel.scrollHeight;
  }

 /* ---------- Send order via WhatsApp ---------- */
function sendOrder(){
  const name = document.getElementById('full-name').value.trim();
  const address = document.getElementById('full-address').value.trim();
  const method = document.getElementById('delivery-method')?.value || "pickup"; // pickup/cod/delivery

  if (!name || !address){
    alert('Sila isi Nama penuh dan Alamat penuh.');
    return;
  }
  if (cart.length === 0){
    alert('Troli kosong!');
    return;
  }

  let subtotal = 0;
  let qtyTotal = 0;
  let msg = `Hai, saya ingin membuat pesanan dari Pipah Cookies:\n\n` +
            `Nama: ${name}\n` +
            `Alamat: ${address}\n` +
            `Penerimaan: ${method.toUpperCase()}\n\n` +
            `Pesanan:\n`;

  cart.forEach(i=>{
    const itemTotal = i.price * i.qty;
    subtotal += itemTotal;
    qtyTotal += i.qty;
    msg += `${i.qty} × ${i.name} (RM ${itemTotal.toFixed(2)})\n`;
  });

  // --- kira postage ikut pilihan method ---
  let postage = 0;
  if(method === "pickup"){ 
    postage = 0; 
  } 
  else if(method === "cod"){ 
    postage = 0; // kalau nak letak syarat area boleh tambah sini
  } 
  else if(method === "delivery"){ 
    // contoh tier (boleh adjust ikut keperluan)
    const postageTiers = [
      { max: 3, fee: 5 }, 
      { max: 6, fee: 8 }, 
      { max: 999, fee: 12 }
    ];
    for (let tier of postageTiers){
      if(qtyTotal <= tier.max){
        postage = tier.fee;
        break;
      }
    }
  }

  const finalTotal = subtotal + postage;

  msg += `\nSubtotal: RM ${subtotal.toFixed(2)}`;
  msg += `\nPostage (${method.toUpperCase()}): RM ${postage.toFixed(2)}`;
  msg += `\n👉 Jumlah Akhir: RM ${finalTotal.toFixed(2)}`;

  const url = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(msg)}`;
  window.open(url,'_blank');
}

  /* ---------- Storage helpers ---------- */
  function saveCart(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(cart)); }
  function escapeHtml(text){ return String(text).replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }

    
const music = document.getElementById('bgmusic');
const btn = document.getElementById('musicBtn');
const text = document.getElementById('musicText');
const wrapper = document.getElementById('musicWrapper');
let isPlaying = false;
let savedTime = 0;
let reminderShown = false;
let lastScrollY = window.scrollY;

// 🌸 Show intro text
function showText() {
  text.style.opacity = 1;
  text.style.transform = 'translateX(0)';
  setTimeout(() => {
    text.style.opacity = 0;
    text.style.transform = 'translateX(-25px)';
  }, 5000);
}

// 🎨 Detect brightness of background under button
function detectColorUnderButton() {
  const underEl = document.elementFromPoint(40, window.innerHeight - 40);
  if (!underEl) return;

  const bgColor = window.getComputedStyle(underEl).backgroundColor;
  const rgb = bgColor.match(/\d+/g)?.map(Number);
  if (!rgb) return;

  const brightness = (rgb[0]*299 + rgb[1]*587 + rgb[2]*114) / 1000;
  if (brightness > 150) {
    btn.style.color = '#222';
    btn.style.borderColor = 'rgba(0,0,0,0.4)';
    text.style.color = '#222';
    text.style.textShadow = '0 2px 4px rgba(255,255,255,0.4)';
  } else {
    btn.style.color = '#fff';
    btn.style.borderColor = 'rgba(255,255,255,0.5)';
    text.style.color = '#fff';
    text.style.textShadow = '0 2px 6px rgba(0,0,0,0.3)';
  }
}

// 🪄 Auto hide on scroll
function handleScroll() {
  detectColorUnderButton();

  const currentY = window.scrollY;
  if (currentY > lastScrollY + 50) {
    // scroll down → hide
    wrapper.style.opacity = '0';
    wrapper.style.transform = 'translateY(30px)';
  } else if (currentY < lastScrollY - 50) {
    // scroll up → show
    wrapper.style.opacity = '1';
    wrapper.style.transform = 'translateY(0)';
  }
  lastScrollY = currentY;
}

window.addEventListener('load', () => {
  showText();
  detectColorUnderButton();
  music.play().catch(()=>{});
});

window.addEventListener('scroll', () => {
  handleScroll();
  if (!reminderShown && window.scrollY > 100) {
    showText();
    reminderShown = true;
  }
});

setInterval(detectColorUnderButton, 2000);

// 🎵 Music control
btn.addEventListener('click', async () => {
  if (!isPlaying) {
    music.currentTime = savedTime;
    music.volume = 0;
    music.muted = false;
    try {
      await music.play();
    } catch (err) {
      console.log('Playback error:', err);
    }

    // Smooth fade-in volume
    let volume = 0;
    const fadeInterval = setInterval(() => {
      if (volume < 1) {
        volume += 0.05;
        music.volume = Math.min(volume, 1);
      } else {
        clearInterval(fadeInterval);
      }
    }, 150);

    isPlaying = true;
    btn.classList.add('playing', 'spinning');
  } else {
    savedTime = music.currentTime;
    music.pause();
    isPlaying = false;
    btn.classList.remove('playing', 'spinning');
  }
});
  </script>
</body>
</html>
